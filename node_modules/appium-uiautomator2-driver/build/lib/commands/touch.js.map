{"version":3,"file":"touch.js","names":["commands","extensions","doPerformMultiAction","elementId","states","opts","actions","uiautomator2","jwproxy","command","performActions","log","debug","JSON","stringify","preprocessedActions","map","action","Object","assign","type","parameters","pointerType"],"sources":["../../../lib/commands/touch.js"],"sourcesContent":["let commands = {}, extensions = {};\n\ncommands.doPerformMultiAction = async function (elementId, states) {\n  let opts;\n  if (elementId) {\n    opts = {\n      elementId,\n      actions: states\n    };\n\n    return await this.uiautomator2.jwproxy.command('/touch/multi/perform', 'POST', opts);\n  } else {\n    opts = {\n      actions: states\n    };\n    return await this.uiautomator2.jwproxy.command('/touch/multi/perform', 'POST', opts);\n  }\n};\n\ncommands.performActions = async function (actions) {\n  this.log.debug(`Received the following W3C actions: ${JSON.stringify(actions, null, '  ')}`);\n  // This is mandatory, since Selenium API uses MOUSE as the default pointer type\n  const preprocessedActions = actions\n    .map((action) => Object.assign({}, action, action.type === 'pointer' ? {\n      parameters: {\n        pointerType: 'touch'\n      }\n    } : {}));\n  this.log.debug(`Preprocessed actions: ${JSON.stringify(preprocessedActions, null, '  ')}`);\n  return await this.uiautomator2.jwproxy.command('/actions', 'POST', {actions: preprocessedActions});\n};\n\nObject.assign(extensions, commands);\nexport default extensions;\n"],"mappings":";;;;;;;;;AAAA,IAAIA,QAAQ,GAAG,EAAf;AAAA,IAAmBC,UAAU,GAAG,EAAhC;;AAEAD,QAAQ,CAACE,oBAAT,GAAgC,gBAAgBC,SAAhB,EAA2BC,MAA3B,EAAmC;EACjE,IAAIC,IAAJ;;EACA,IAAIF,SAAJ,EAAe;IACbE,IAAI,GAAG;MACLF,SADK;MAELG,OAAO,EAAEF;IAFJ,CAAP;IAKA,OAAO,MAAM,KAAKG,YAAL,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkC,sBAAlC,EAA0D,MAA1D,EAAkEJ,IAAlE,CAAb;EACD,CAPD,MAOO;IACLA,IAAI,GAAG;MACLC,OAAO,EAAEF;IADJ,CAAP;IAGA,OAAO,MAAM,KAAKG,YAAL,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkC,sBAAlC,EAA0D,MAA1D,EAAkEJ,IAAlE,CAAb;EACD;AACF,CAfD;;AAiBAL,QAAQ,CAACU,cAAT,GAA0B,gBAAgBJ,OAAhB,EAAyB;EACjD,KAAKK,GAAL,CAASC,KAAT,CAAgB,uCAAsCC,IAAI,CAACC,SAAL,CAAeR,OAAf,EAAwB,IAAxB,EAA8B,IAA9B,CAAoC,EAA1F;EAEA,MAAMS,mBAAmB,GAAGT,OAAO,CAChCU,GADyB,CACpBC,MAAD,IAAYC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,MAAlB,EAA0BA,MAAM,CAACG,IAAP,KAAgB,SAAhB,GAA4B;IACrEC,UAAU,EAAE;MACVC,WAAW,EAAE;IADH;EADyD,CAA5B,GAIvC,EAJa,CADS,CAA5B;EAMA,KAAKX,GAAL,CAASC,KAAT,CAAgB,yBAAwBC,IAAI,CAACC,SAAL,CAAeC,mBAAf,EAAoC,IAApC,EAA0C,IAA1C,CAAgD,EAAxF;EACA,OAAO,MAAM,KAAKR,YAAL,CAAkBC,OAAlB,CAA0BC,OAA1B,CAAkC,UAAlC,EAA8C,MAA9C,EAAsD;IAACH,OAAO,EAAES;EAAV,CAAtD,CAAb;AACD,CAXD;;AAaAG,MAAM,CAACC,MAAP,CAAclB,UAAd,EAA0BD,QAA1B;eACeC,U"}