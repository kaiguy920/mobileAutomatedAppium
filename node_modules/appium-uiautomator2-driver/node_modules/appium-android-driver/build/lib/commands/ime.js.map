{"version":3,"file":"ime.js","names":["commands","helpers","extensions","isIMEActivated","availableIMEEngines","log","debug","engines","adb","availableIMEs","JSON","stringify","getActiveIMEEngine","defaultIME","activateIMEEngine","imeId","availableEngines","indexOf","errors","IMENotAvailableError","enableIME","setIME","deactivateIMEEngine","currentEngine","disableIME","Object","assign"],"sources":["../../../lib/commands/ime.js"],"sourcesContent":["import { errors } from 'appium/driver';\n\nlet commands = {}, helpers = {}, extensions = {};\n\ncommands.isIMEActivated = async function isIMEActivated () { // eslint-disable-line require-await\n  // IME is always activated on Android devices\n  return true;\n};\n\ncommands.availableIMEEngines = async function availableIMEEngines () {\n  this.log.debug('Retrieving available IMEs');\n  let engines = await this.adb.availableIMEs();\n  this.log.debug(`Engines: ${JSON.stringify(engines)}`);\n  return engines;\n};\n\ncommands.getActiveIMEEngine = async function getActiveIMEEngine () {\n  this.log.debug('Retrieving current default IME');\n  return await this.adb.defaultIME();\n};\n\ncommands.activateIMEEngine = async function activateIMEEngine (imeId) {\n  this.log.debug(`Attempting to activate IME ${imeId}`);\n  let availableEngines = await this.adb.availableIMEs();\n  if (availableEngines.indexOf(imeId) === -1) {\n    this.log.debug('IME not found, failing');\n    throw new errors.IMENotAvailableError();\n  }\n  this.log.debug('Found installed IME, attempting to activate');\n  await this.adb.enableIME(imeId);\n  await this.adb.setIME(imeId);\n};\n\ncommands.deactivateIMEEngine = async function deactivateIMEEngine () {\n  let currentEngine = await this.getActiveIMEEngine();\n  this.log.debug(`Attempting to deactivate ${currentEngine}`);\n  await this.adb.disableIME(currentEngine);\n};\n\nObject.assign(extensions, commands, helpers);\nexport { commands, helpers };\nexport default extensions;\n"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAIA,QAAQ,GAAG,EAAf;AAAA,IAAmBC,OAAO,GAAG,EAA7B;AAAA,IAAiCC,UAAU,GAAG,EAA9C;;;;AAEAF,QAAQ,CAACG,cAAT,GAA0B,eAAeA,cAAf,GAAiC;EAEzD,OAAO,IAAP;AACD,CAHD;;AAKAH,QAAQ,CAACI,mBAAT,GAA+B,eAAeA,mBAAf,GAAsC;EACnE,KAAKC,GAAL,CAASC,KAAT,CAAe,2BAAf;EACA,IAAIC,OAAO,GAAG,MAAM,KAAKC,GAAL,CAASC,aAAT,EAApB;EACA,KAAKJ,GAAL,CAASC,KAAT,CAAgB,YAAWI,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAAwB,EAAnD;EACA,OAAOA,OAAP;AACD,CALD;;AAOAP,QAAQ,CAACY,kBAAT,GAA8B,eAAeA,kBAAf,GAAqC;EACjE,KAAKP,GAAL,CAASC,KAAT,CAAe,gCAAf;EACA,OAAO,MAAM,KAAKE,GAAL,CAASK,UAAT,EAAb;AACD,CAHD;;AAKAb,QAAQ,CAACc,iBAAT,GAA6B,eAAeA,iBAAf,CAAkCC,KAAlC,EAAyC;EACpE,KAAKV,GAAL,CAASC,KAAT,CAAgB,8BAA6BS,KAAM,EAAnD;EACA,IAAIC,gBAAgB,GAAG,MAAM,KAAKR,GAAL,CAASC,aAAT,EAA7B;;EACA,IAAIO,gBAAgB,CAACC,OAAjB,CAAyBF,KAAzB,MAAoC,CAAC,CAAzC,EAA4C;IAC1C,KAAKV,GAAL,CAASC,KAAT,CAAe,wBAAf;IACA,MAAM,IAAIY,cAAA,CAAOC,oBAAX,EAAN;EACD;;EACD,KAAKd,GAAL,CAASC,KAAT,CAAe,6CAAf;EACA,MAAM,KAAKE,GAAL,CAASY,SAAT,CAAmBL,KAAnB,CAAN;EACA,MAAM,KAAKP,GAAL,CAASa,MAAT,CAAgBN,KAAhB,CAAN;AACD,CAVD;;AAYAf,QAAQ,CAACsB,mBAAT,GAA+B,eAAeA,mBAAf,GAAsC;EACnE,IAAIC,aAAa,GAAG,MAAM,KAAKX,kBAAL,EAA1B;EACA,KAAKP,GAAL,CAASC,KAAT,CAAgB,4BAA2BiB,aAAc,EAAzD;EACA,MAAM,KAAKf,GAAL,CAASgB,UAAT,CAAoBD,aAApB,CAAN;AACD,CAJD;;AAMAE,MAAM,CAACC,MAAP,CAAcxB,UAAd,EAA0BF,QAA1B,EAAoCC,OAApC;eAEeC,U"}