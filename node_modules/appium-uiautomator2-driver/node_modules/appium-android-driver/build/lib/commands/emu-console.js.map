{"version":3,"file":"emu-console.js","names":["EMU_CONSOLE_FEATURE","commands","mobileExecEmuConsoleCommand","opts","ensureFeatureEnabled","command","execTimeout","connTimeout","initTimeout","errors","InvalidArgumentError","adb","execEmuConsoleCommand"],"sources":["../../../lib/commands/emu-console.js"],"sourcesContent":["import { errors } from 'appium/driver';\n\nconst EMU_CONSOLE_FEATURE = 'emulator_console';\n\nconst commands = {};\n\n/**\n * @typedef {Object} ExecOptions\n * @property {!Array<string>|string} command - The actual command to execute. See\n * https://developer.android.com/studio/run/emulator-console for more details\n * on available commands\n * @property {number} execTimeout [60000] A timeout used to wait for a server\n * reply to the given command in milliseconds\n * @property {number} connTimeout [5000] Console connection timeout in milliseconds\n * @property {number} initTimeout [5000] Telnet console initialization timeout\n * in milliseconds (the time between the connection happens and the command prompt\n * is available)\n */\n\n/**\n * Executes a command through emulator telnet console interface and returns its output.\n * The `emulator_console` server feature must be enabled in order to use this method.\n *\n * @param {ExecOptions} opts\n * @returns {string} The command output\n * @throws {Error} If there was an error while connecting to the Telnet console\n * or if the given command returned non-OK response\n */\ncommands.mobileExecEmuConsoleCommand = async function mobileExecEmuConsoleCommand (opts = {}) {\n  this.ensureFeatureEnabled(EMU_CONSOLE_FEATURE);\n\n  const {\n    command,\n    execTimeout,\n    connTimeout,\n    initTimeout,\n  } = opts;\n\n  if (!command) {\n    throw new errors.InvalidArgumentError(`The 'command' argument is mandatory`);\n  }\n\n  return await this.adb.execEmuConsoleCommand(command, {\n    execTimeout,\n    connTimeout,\n    initTimeout,\n  });\n};\n\nexport { commands };\nexport default commands;\n"],"mappings":";;;;;;;;;AAAA;;AAEA,MAAMA,mBAAmB,GAAG,kBAA5B;AAEA,MAAMC,QAAQ,GAAG,EAAjB;;;AAwBAA,QAAQ,CAACC,2BAAT,GAAuC,eAAeA,2BAAf,CAA4CC,IAAI,GAAG,EAAnD,EAAuD;EAC5F,KAAKC,oBAAL,CAA0BJ,mBAA1B;EAEA,MAAM;IACJK,OADI;IAEJC,WAFI;IAGJC,WAHI;IAIJC;EAJI,IAKFL,IALJ;;EAOA,IAAI,CAACE,OAAL,EAAc;IACZ,MAAM,IAAII,cAAA,CAAOC,oBAAX,CAAiC,qCAAjC,CAAN;EACD;;EAED,OAAO,MAAM,KAAKC,GAAL,CAASC,qBAAT,CAA+BP,OAA/B,EAAwC;IACnDC,WADmD;IAEnDC,WAFmD;IAGnDC;EAHmD,CAAxC,CAAb;AAKD,CAnBD;;eAsBeP,Q"}